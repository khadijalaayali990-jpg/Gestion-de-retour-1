<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Liste des Retours - Gestion de Retour</title>
<link rel="stylesheet" href="style.css">
<style>
.container {
    width: 95%;
    margin: 20px auto;
}

h2 {
    text-align: center;
    color: #6b2ddf;
    margin-bottom: 20px;
}

table {
    width: 100%;
    border-collapse: collapse;
    background: white;
    border-radius: 12px;
    overflow: hidden;
}

th, td {
    padding: 12px;
    border-bottom: 1px solid #ddd;
    text-align: center;
}

th {
    background: #a179f7;
    color: white;
}

button {
    background: #a179f7;
    color: white;
    border: none;
    padding: 6px 12px;
    border-radius: 6px;
    cursor: pointer;
    transition: 0.3s;
    margin: 2px;
}

button:hover {
    background: #6b2ddf;
}

nav {
    display: flex;
    justify-content: center;
    background: #fff;
    padding: 10px;
    gap: 15px;
    border-radius: 8px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    margin-bottom: 20px;
}

nav a {
    text-decoration: none;
    color: #6b2ddf;
    font-weight: bold;
    padding: 5px 10px;
    border-radius: 6px;
    transition: 0.3s;
}

nav a:hover {
    background: #6b2ddf;
    color: white;
}
</style>
</head>
<body>

<script>
if (localStorage.getItem("logged") !== "true") {
    window.location.href = "login.html";
}
</script>

<header>ğŸ“¦ Gestion de Retour</header>

<nav>
    <a href="dashboard.html">Accueil</a>
    <a href="ajouter.html">CrÃ©er un Retour</a>
    <a href="liste.html">Liste des Retours</a>
</nav>

<div class="container">
    <h2>Liste des Retours</h2>
    <table id="retoursTable">
        <tr>
            <th>ID du retour</th>
            <th>NumÃ©ro de commande</th>
            <th>Client</th>
            <th>Produit</th>
            <th>Date</th>
            <th>Ã‰tat</th>
            <th>Actions</th>
        </tr>
    </table>
</div>

<script>
function afficherRetours() {
    let retours = JSON.parse(localStorage.getItem("retours") || "[]");
    let table = document.getElementById("retoursTable");

    // Ù†Ø­ÙŠØ¯Ùˆ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØµÙÙˆÙ Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ù…Ø§ Ø¹Ø¯Ø§ Ø±Ø£Ø³ Ø§Ù„Ø¬Ø¯ÙˆÙ„
    table.innerHTML = `
        <tr>
            <th>ID du retour</th>
            <th>NumÃ©ro de commande</th>
            <th>Client</th>
            <th>Produit</th>
            <th>Date</th>
            <th>Ã‰tat</th>
            <th>Actions</th>
        </tr>
    `;

    retours.forEach((r, index) => {
        let row = table.insertRow();
        row.insertCell(0).innerText = index + 1;
        row.insertCell(1).innerText = r.orderID;
        row.insertCell(2).innerText = r.client;
        row.insertCell(3).innerText = r.product;
        row.insertCell(4).innerText = r.date;
        row.insertCell(5).innerText = r.status || "En attente";

        // Ø§Ù„Ø¹Ù…ÙˆØ¯ Actions
        row.insertCell(6).innerHTML = `
            <button onclick="changerStatus(${index}, 'AcceptÃ©')">AcceptÃ©</button>
            <button onclick="changerStatus(${index}, 'RefusÃ©')">RefusÃ©</button>
            <button onclick="changerStatus(${index}, 'TraitÃ©')">TraitÃ©</button>
            <button onclick="supprimer(${index})">Supprimer</button>
            <button onclick="window.location.href='details.html?index=${index}'">Voir DÃ©tails</button>
        `;
    });
}

function changerStatus(index, status) {
    let retours = JSON.parse(localStorage.getItem("retours") || "[]");
    retours[index].status = status;
    localStorage.setItem("retours", JSON.stringify(retours));
    afficherRetours();
}

function supprimer(index) {
    let retours = JSON.parse(localStorage.getItem("retours") || "[]");
    retours.splice(index, 1);
    localStorage.setItem("retours", JSON.stringify(retours));
    afficherRetours();
}

// Ø¹Ø±Ø¶ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
afficherRetours();
</script> src="script.js"></script>

</body>
</html>